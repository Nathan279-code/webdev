<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Titre par dÃ©faut{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- CSS additionnel (ex: Leaflet, ou perso) -->
    {% block extra_head %}{% endblock %}
</head>
<body>

    {# Capture du contenu de la sidebar une seule fois #}
    {% set sidebar_content %}{% block sidebar %}{% endblock %}{% endset %}
    {% set main_content %}{% block content %}{% endblock %}{% endset %}

    <div class="d-flex vh-100" style="gap: 1rem;">
        {% if sidebar_content.strip() %}
            <!-- Affichage AVEC sidebar -->
            <nav class="bg-light p-3 shadow" style="width: 300px; min-height: 100vh;">
                {{ sidebar_content | safe }}
            </nav>
            <main class="flex-grow-1 p-0" style="overflow: auto;">
                {{ main_content | safe }}
            </main>
        {% else %}
            <!-- Affichage SANS sidebar -->
            <main class="flex-grow-1 p-4 w-100" style="overflow: auto;">
                {{ main_content | safe }}
            </main>
        {% endif %}
    </div>

    <!-- Bootstrap JS Bundle (inclut Popper.js) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    {% block extra_scripts %}{% endblock %}
</body>
</html>
